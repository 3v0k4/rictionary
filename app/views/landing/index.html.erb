<%= form_with url: root_path, method: :get do |form| %>
  <%= form.text_field :query, value: @view_model.corrected_query %>
  <%= form.submit "Search" %>
<% end %>

<% if @view_model.query != @view_model.corrected_query %>
  <p><%= @view_model.query %> to <%= @view_model.corrected_query %></p>
<% end %>

<% if @view_model.parse_result.translations.any? %>
  Translations:
  <ul>
    <% @view_model.parse_result.translations.each do |translation| %>
      <li><%= translation %></li>
    <% end %>
  </ul>
<% end %>

<% if @view_model.parse_result.examples.any? %>
  Examples:
  <ul>
    <% @view_model.parse_result.examples.each do |example| %>
      <li><%= example %></li>
    <% end %>
  </ul>
<% end %>

<% if @view_model.parse_result.images.any? %>
  Images:
  <ul>
    <% @view_model.parse_result.images.each do |image| %>
      <li><img src="<%= image %>"></img></li>
    <% end %>
  </ul>
<% end %>

<% if @view_model.parse_result.declination.present? %>
  Declination:
  <table>
    <tr>
      <th>nominative</th>
      <td><%= @view_model.parse_result.declination.fetch(:nominative_singular) %></td>
      <td><%= @view_model.parse_result.declination.fetch(:nominative_plural) %></td>
    </tr>

    <tr>
      <th>genitive</th>
      <td><%= @view_model.parse_result.declination.fetch(:genitive_singular) %></td>
      <td><%= @view_model.parse_result.declination.fetch(:genitive_plural) %></td>
    </tr>

    <tr>
      <th>dative</th>
      <td><%= @view_model.parse_result.declination.fetch(:dative_singular) %></td>
      <td><%= @view_model.parse_result.declination.fetch(:dative_plural) %></td>
    </tr>

    <tr>
      <th>accusative</th>
      <td><%= @view_model.parse_result.declination.fetch(:accusative_singular) %></td>
      <td><%= @view_model.parse_result.declination.fetch(:accusative_plural) %></td>
    </tr>

    <tr>
      <th>instrumental</th>
      <td><%= @view_model.parse_result.declination.fetch(:instrumental_singular) %></td>
      <td><%= @view_model.parse_result.declination.fetch(:instrumental_plural) %></td>
    </tr>

    <tr>
      <th>locative</th>
      <td><%= @view_model.parse_result.declination.fetch(:locative_singular) %></td>
      <td><%= @view_model.parse_result.declination.fetch(:locative_plural) %></td>
    </tr>

    <tr>
      <th>vocative</th>
      <td><%= @view_model.parse_result.declination.fetch(:vocative_singular) %></td>
      <td><%= @view_model.parse_result.declination.fetch(:vocative_plural) %></td>
    </tr>
  </table>
<% end %>

<% if @view_model.parse_result.conjugation.present? %>
  Conjugation:
  <table>
    <tr>
      <td colspan="2"></td>
      <td colspan="3">singular</td>
      <td colspan="3">plural</td>
    </tr>

    <tr>
      <td colspan="2"></td>
      <td>1st</td>
      <td>2nd</td>
      <td>3nd</td>
      <td>1st</td>
      <td>2nd</td>
      <td>3nd</td>
    </tr>

    <tr>
      <th colspan="2">infinitive</th>
      <td colspan="6"><%= @view_model.parse_result.conjugation.fetch(:infinitive) %></td>
    </tr>

    <% if @view_model.parse_result.conjugation.fetch(:present).present? %>
      <tr>
        <th colspan="2">present</th>
        <td><%= @view_model.parse_result.conjugation.fetch(:present)[0] %></td>
        <td><%= @view_model.parse_result.conjugation.fetch(:present)[1] %></td>
        <td><%= @view_model.parse_result.conjugation.fetch(:present)[2] %></td>
        <td><%= @view_model.parse_result.conjugation.fetch(:present)[3] %></td>
        <td><%= @view_model.parse_result.conjugation.fetch(:present)[4] %></td>
        <td><%= @view_model.parse_result.conjugation.fetch(:present)[5] %></td>
      </tr>
    <% end %>

    <% if @view_model.parse_result.conjugation.fetch(:future).present? %>
      <tr>
        <th colspan="2">future</th>
        <td><%= @view_model.parse_result.conjugation.fetch(:future)[0] %></td>
        <td><%= @view_model.parse_result.conjugation.fetch(:future)[1] %></td>
        <td><%= @view_model.parse_result.conjugation.fetch(:future)[2] %></td>
        <td><%= @view_model.parse_result.conjugation.fetch(:future)[3] %></td>
        <td><%= @view_model.parse_result.conjugation.fetch(:future)[4] %></td>
        <td><%= @view_model.parse_result.conjugation.fetch(:future)[5] %></td>
      </tr>
    <% end %>

    <tr>
      <th rowspan="3">past</th>
      <th>masculine</th>
      <td><%= @view_model.parse_result.conjugation.fetch(:past).fetch(:masculine)[0] %></td>
      <td><%= @view_model.parse_result.conjugation.fetch(:past).fetch(:masculine)[1] %></td>
      <td><%= @view_model.parse_result.conjugation.fetch(:past).fetch(:masculine)[2] %></td>
      <td><%= @view_model.parse_result.conjugation.fetch(:past).fetch(:masculine)[3] %></td>
      <td><%= @view_model.parse_result.conjugation.fetch(:past).fetch(:masculine)[4] %></td>
      <td><%= @view_model.parse_result.conjugation.fetch(:past).fetch(:masculine)[5] %></td>
    </tr>

    <tr>
      <th>feminine</th>
      <td><%= @view_model.parse_result.conjugation.fetch(:past).fetch(:feminine)[0] %></td>
      <td><%= @view_model.parse_result.conjugation.fetch(:past).fetch(:feminine)[1] %></td>
      <td><%= @view_model.parse_result.conjugation.fetch(:past).fetch(:feminine)[2] %></td>
      <td><%= @view_model.parse_result.conjugation.fetch(:past).fetch(:feminine)[3] %></td>
      <td><%= @view_model.parse_result.conjugation.fetch(:past).fetch(:feminine)[4] %></td>
      <td><%= @view_model.parse_result.conjugation.fetch(:past).fetch(:feminine)[5] %></td>
    </tr>

    <tr>
      <th>neuter</th>
      <td><%= @view_model.parse_result.conjugation.fetch(:past).fetch(:neuter)[0] %></td>
      <td><%= @view_model.parse_result.conjugation.fetch(:past).fetch(:neuter)[1] %></td>
      <td><%= @view_model.parse_result.conjugation.fetch(:past).fetch(:neuter)[2] %></td>
      <td><%= @view_model.parse_result.conjugation.fetch(:past).fetch(:neuter)[3] %></td>
      <td><%= @view_model.parse_result.conjugation.fetch(:past).fetch(:neuter)[4] %></td>
      <td><%= @view_model.parse_result.conjugation.fetch(:past).fetch(:neuter)[5] %></td>
    </tr>
  </table>
<% end %>
